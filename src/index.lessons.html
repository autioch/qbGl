<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style type="text/css">
            canvas{display:block}
            .container{display:inline-block;vertical-align:top;position:relative;border:solid 3px transparent;width:300px}
            .container:focus{border-color:#3f3}
            .container:not(:focus):hover{border-color:#afa}
            table{width:100%;border:0;border-collapse:collapse}
            input{width:30px}
            #loadingtext {position:absolute;top:100px;width:300px;text-align:center;font-size:2em;color:white}
            p{margin:0}
        </style>
    </head>
    <body>
        <div class="container" id="container10" tabindex="0">
            <canvas id="webgl10" width="300" height="225"></canvas>
            <div id="loadingtext">Loading world...</div>
            <div class="keybinds">Arrows, WASD, PageUp, PageDown</div>
        </div>
        <div class="container" id="container11" tabindex="0">
            <canvas id="webgl11" width="300" height="225"></canvas>
            <div class="keybinds">Mouse</div>
            <p>Spin the moon by dragging it with the mouse.</p>
            <p>Uses controls from example 7.</p>
            <p>Moon texture courtesy of <a href="http://maps.jpl.nasa.gov/">the Jet Propulsion Laboratory</a>.</p>
        </div>
        <!-- Lesson 10 -->
        <script id="shader-fs10" type="x-shader/x-fragment" data-uniforms="uSampler" data-attribs="">
            precision mediump float;

            varying vec2 vTextureCoord;

            uniform sampler2D uSampler;

            void main(void) {
            gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
            }
        </script>
        <script id="shader-vs10" type="x-shader/x-vertex" data-uniforms="uMVMatrix,uPMatrix" data-attribs="aVertexPosition,aTextureCoord">
            attribute vec3 aVertexPosition;
            attribute vec2 aTextureCoord;

            uniform mat4 uMVMatrix;
            uniform mat4 uPMatrix;

            varying vec2 vTextureCoord;

            void main(void) {
            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
            vTextureCoord = aTextureCoord;
            }
        </script>
        <!-- Lesson 11 -->
        <script id="shader-fs11" type="x-shader/x-fragment" data-uniforms="uSampler" data-attribs="">
            precision mediump float;

            varying vec2 vTextureCoord;
            varying vec3 vLightWeighting;

            uniform sampler2D uSampler;

            void main(void) {
            vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
            gl_FragColor = vec4(textureColor.rgb * vLightWeighting, textureColor.a);
            }
        </script>
        <script id="shader-vs11" type="x-shader/x-vertex" data-uniforms="uMVMatrix,uPMatrix,uNMatrix,uAmbientColor,uLightingDirection,uDirectionalColor,uUseLighting" data-attribs="aVertexPosition,aVertexNormal,aTextureCoord">
            attribute vec3 aVertexPosition;
            attribute vec3 aVertexNormal;
            attribute vec2 aTextureCoord;

            uniform mat4 uMVMatrix;
            uniform mat4 uPMatrix;
            uniform mat3 uNMatrix;

            uniform vec3 uAmbientColor;

            uniform vec3 uLightingDirection;
            uniform vec3 uDirectionalColor;

            uniform bool uUseLighting;

            varying vec2 vTextureCoord;
            varying vec3 vLightWeighting;

            void main(void) {
            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
            vTextureCoord = aTextureCoord;

            if (!uUseLighting) {
            vLightWeighting = vec3(1.0, 1.0, 1.0);
            } else {
            vec3 transformedNormal = uNMatrix * aVertexNormal;
            float directionalLightWeighting = max(dot(transformedNormal, uLightingDirection), 0.0);
            vLightWeighting = uAmbientColor + uDirectionalColor * directionalLightWeighting;
            }
            }
        </script>
    </body>
</html>
